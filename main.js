(()=>{"use strict";var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.d({},{vV:()=>V});var n=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._id=t.id,this._link=t.link,this._name=t.name,this._cardSelector=n,this._handleCardClick=r}var n,r;return n=e,(r=[{key:"_getTemplate",value:function(){return document.querySelector(this._cardSelector).content.querySelector(".elements__element").cloneNode(!0)}},{key:"_setEventListeners",value:function(){this._element.querySelector(".elements__like").addEventListener("click",this._toggleLike),this._element.querySelector(".elements__deleteButton").addEventListener("click",this._removeCard),this._element.querySelector(".elements__image").addEventListener("click",this._handleCardClick)}},{key:"_toggleLike",value:function(e){e.target.classList.toggle("elements__like_active")}},{key:"_removeCard",value:function(e){var t=e.target.closest(".elements__element"),n=new XMLHttpRequest;n.open("DELETE","http://127.0.0.1:3002/cards/"+t._id,!0),n.onload=function(){n.readyState===XMLHttpRequest.DONE&&t.remove()},n.send(null)}},{key:"getCard",value:function(){return this._element=this._getTemplate(),this._setEventListeners(),this._element.id=this._id,this._element.querySelector(".elements__name").textContent=this._name,this._element.querySelector(".elements__image").src=this._link,this._element.querySelector(".elements__image").alt=this._name,this._element}}])&&t(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),e}();function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(){function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._items=r,this._renderer=o,this._cardElements=document.querySelector(n)}var t,n;return t=e,(n=[{key:"renderAll",value:function(){var e=this;this._items.forEach((function(t){e._renderer(t)}))}},{key:"addItem",value:function(e){this._cardElements.append(e)}}])&&r(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),i=document.querySelector(".type_new-item .popup__input_type_line-one"),a=document.querySelector(".type_new-item .popup__input_type_line-two"),c=document.querySelector(".elements"),u=document.querySelector(".type_profile .popup__input_type_line-one"),l=document.querySelector(".type_profile .popup__input_type_line-two"),s=document.querySelector(".profile__editButton"),p=document.querySelector(".profile__addButton"),f={formSelector:".popup__container",inputSelector:".popup__input",submitButtonSelector:".popup__saveButton",inactiveButtonClass:"popup__saveButton_error",inputErrorClass:"popup__input_style-error",errorClass:"popup__input-error_place_line"},y=void 0;function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var _=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popup=document.querySelector(".popup"),this._form=document.querySelector(t),this._handleEscClose=function(e){"Escape"===e.key&&n.close()}}var t,n;return t=e,(n=[{key:"open",value:function(){this._popup.classList.remove("hidden"),this._popup.classList.add("visible"),this._form.classList.remove("hidden"),this._form.classList.add("visible"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popup.classList.add("hidden"),this._popup.classList.remove("visible"),this._form.classList.add("hidden"),this._form.classList.remove("visible"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"setEventListeners",value:function(){var e=this;document.addEventListener("click",(function(t){t.target.classList.contains("popup")&&e.close()})),this._form.addEventListener("click",(function(t){t.target.classList.contains("exitButton")&&e.close()}))}}])&&d(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(){return v="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=b(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},v.apply(this,arguments)}function b(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=S(e)););return e}function g(e,t){return g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},g(e,t)}function w(e,t){if(t&&("object"===h(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function S(e){return S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},S(e)}var O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=S(r);if(o){var n=S(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return w(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e))._bigCardImage=document.querySelector(".popup__image"),t._bigCardCaption=document.querySelector(".popup__caption"),t}return t=a,(n=[{key:"open",value:function(e,t){this._bigCardImage.src=e,this._bigCardCaption.textContent=t,v(S(a.prototype),"open",this).call(this)}}])&&m(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(_);function E(e){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k(){return k="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=L(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},k.apply(this,arguments)}function L(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=q(e)););return e}function j(e,t){return j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},j(e,t)}function P(e,t){if(t&&("object"===E(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function q(e){return q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},q(e)}var R=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&j(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=q(r);if(o){var n=q(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return P(this,e)});function a(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this,e))._submitHandler=t,n}return t=a,(n=[{key:"_getInputValues",value:function(){var e=this,t=this._form.querySelectorAll(".popup__input");this._formValues={},t.forEach((function(t){e._formValues[t.name]=t.value}))}},{key:"setEventListeners",value:function(){k(q(a.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",this._submitHandler)}},{key:"close",value:function(){k(q(a.prototype),"close",this).call(this),this._form.reset()}}])&&C(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(_);function B(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var T=function(){function e(t){var n=t.userNameSelector,r=t.occupationSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._profileName=document.querySelector(n),this._profileOccupation=document.querySelector(r)}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:this._profileName.textContent,occupation:this._profileOccupation.textContent}}},{key:"setUserInfo",value:function(e){var t=e.name,n=e.occupation;this._profileName.textContent=t,this._profileOccupation.textContent=n}}])&&B(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var x=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._inputList=Array.from(n.querySelectorAll(t.inputSelector)),this._submitButtonSelector=t.submitButtonSelector,this._inactiveButtonClass=t.inactiveButtonClass,this._inputErrorClass=t.inputErrorClass,this._errorClass=t.errorClass}var t,n;return t=e,(n=[{key:"enableValidation",value:function(){var e=this;this._inputList.forEach((function(t){t.addEventListener("input",(function(t){e._handleValidity(t)}))}))}},{key:"_handleValidity",value:function(e){var t=e.target;t.validity.valid?this._hideError(t):this._showError(t),this._checkSubmitterAvailability()}},{key:"_checkSubmitterAvailability",value:function(){var e=this._inputList[0].form.querySelector(this._submitButtonSelector);this._inputList.every((function(e){return e.validity.valid}))?(e.classList.remove(this._inactiveButtonClass),e.disabled=!1):(e.classList.add(this._inactiveButtonClass),e.disabled=!0)}},{key:"_showError",value:function(e){e.classList.add(this._inputErrorClass);var t=e.form.querySelector("."+this._errorClass+e.id);t.classList.remove("hidden"),t.textContent=e.validationMessage}},{key:"_hideError",value:function(e){e.classList.remove(this._inputErrorClass),e.form.querySelector("."+this._errorClass+e.id).classList.add("hidden")}}])&&I(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),V=new O(".popup__big-card");V.setEventListeners();var N=new R(".type_profile",(function(e){e.preventDefault(),N._getInputValues(),D.setUserInfo(N._formValues),N.close()}));N.setEventListeners(),s.addEventListener("click",(function(){var e=D.getUserInfo();u.value=e.name,l.value=e.occupation,N.open()}));var A=new R(".type_new-item",(function(e){var t,r,o;e.preventDefault(),t=new XMLHttpRequest,r=i.value,o=a.value,t.open("POST","http://127.0.0.1:3002/cards",!0),t.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),t.onreadystatechange=function(){if(t.readyState===XMLHttpRequest.DONE&&201===t.status){var e={id:Number(t.response),name:r,link:o},i=new n(e,"#card-template",(function(e){return V.open(e.target.src,e.target.alt)})).getCard();y.addItem(i)}},t.send("name="+encodeURIComponent(r)+"&link="+encodeURIComponent(o)),A.close()}));A.setEventListeners(),p.addEventListener("click",(function(){A.open()}));var D=new T({userNameSelector:".profile__name",occupationSelector:".profile__occupation"});D.setUserInfo({name:"Жак-Ив Кусто",occupation:"Исследователь океана"});var H=f.formSelector,U=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(f,["formSelector"]);Array.from(document.querySelectorAll(H)).forEach((function(e){new x(U,e).enableValidation()})),function(){for(;c.firstChild;)c.removeChild(c.firstChild);var e=new XMLHttpRequest;e.open("GET","http://127.0.0.1:3002/cards",!0),e.onload=function(){var e={items:JSON.parse(this.response),renderer:function(e){var t=new n(e,"#card-template",(function(e){return V.open(e.target.src,e.target.alt)})).getCard();y.addItem(t)}};(y=new o(e,".elements")).renderAll()},e.onreadystatechange=function(){4==e.readyState&&200!=e.status&&(bigCardImage.src="./images/error.jpg",changeFormVisibility(formBigCard))},e.send()}()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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cEMsRUFBckMsa0JBQ2lCdUMsTUFBTUMsS0FBS3BGLFNBQVNvRSxpQkFBaUJ2QixJQUU3Q1gsU0FBUSxTQUFBK0MsR0FDSyxJQUFJRixFQUFjQyxFQUFZQyxHQUN0Q3dDLHNCTjFEQyxXQUViLEtBQU1sRixFQUFhbUYsWUFDakJuRixFQUFhb0YsWUFBWXBGLEVBQWFtRixZQUd4QyxJQUFNNUcsRUFBVSxJQUFJQyxlQUVwQkQsRUFBUUUsS0FBSyxNQUFPLCtCQUErQixHQUVuREYsRUFBUUcsT0FBUyxXQUVmLElBQU0yRyxFQUFPLENBQUMvRixNQUFPZ0csS0FBS0MsTUFBTXZJLEtBQUs2SCxVQUN2QnRGLFNBQVUsU0FBQW9GLEdBQ1IsSUFDTUcsRUFEVSxJQUFJbEksRUFBSytILEVBQVEsa0JBQWtCLFNBQUExRyxHQUFHLE9BQUk2RixFQUFXckYsS0FBS1IsRUFBSUMsT0FBT2dCLElBQUtqQixFQUFJQyxPQUFPaUIsUUFDekU0RixVQUM1Qm5FLEVBQWFvRSxRQUFRRixNQUdyQ2xFLEVBQWUsSUFBSXhCLEVBQVFpRyxFQUFNLGNBQ3BCRyxhQUlmakgsRUFBUWtHLG1CQUFxQixXQUVELEdBQXRCbEcsRUFBUUksWUFFVSxLQUFsQkosRUFBUW1HLFNBQ1ZlLGFBQWF2RyxJQUFNLHFCQUNuQndHLHFCQUFxQkMsZUFLekJwSCxFQUFRTyxPTTJCVjhHLEkiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9tZXN0by93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9tZXN0by93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vbWVzdG8vd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3V0aWxzL3ZhcmlhYmxlcy5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL2RhdGEuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9wYWdlcy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgcmVxdWlyZSBzY29wZVxudmFyIF9fd2VicGFja19yZXF1aXJlX18gPSB7fTtcblxuIiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGRiUmVjb3JkLCBjYXJkU2VsZWN0b3IsIGhhbmRsZUNhcmRDbGljaykge1xyXG4gICAgICB0aGlzLl9pZCA9IGRiUmVjb3JkLmlkO1xyXG4gICAgICB0aGlzLl9saW5rID0gZGJSZWNvcmQubGluaztcclxuICAgICAgdGhpcy5fbmFtZSA9IGRiUmVjb3JkLm5hbWU7XHJcbiAgICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjsgICAgICBcclxuICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xyXG4gICAgfVxyXG4gIFxyXG4gICAgX2dldFRlbXBsYXRlKCkge1xyXG4gIFxyXG4gICAgICBjb25zdCBjYXJkRWxlbWVudCAgPSBkb2N1bWVudFxyXG4gICAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcclxuICAgICAgICAuY29udGVudFxyXG4gICAgICAgIC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudHNfX2VsZW1lbnQnKVxyXG4gICAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgXHJcbiAgICAgIHJldHVybiBjYXJkRWxlbWVudDtcclxuICBcclxuICAgIH1cclxuICBcclxuICAgIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICBcclxuICAgICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudHNfX2xpa2UnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX3RvZ2dsZUxpa2UpO1xyXG4gICAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50c19fZGVsZXRlQnV0dG9uJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9yZW1vdmVDYXJkKTtcclxuICAgICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudHNfX2ltYWdlJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9oYW5kbGVDYXJkQ2xpY2spO1xyXG4gIFxyXG4gICAgfVxyXG4gIFxyXG4gICAgX3RvZ2dsZUxpa2UoZXZ0KSB7XHJcbiAgICAgIGV2dC50YXJnZXQuY2xhc3NMaXN0LnRvZ2dsZSgnZWxlbWVudHNfX2xpa2VfYWN0aXZlJyk7ICAgIFxyXG4gICAgfVxyXG4gIFxyXG4gICAgX3JlbW92ZUNhcmQoZXZ0KSAge1xyXG4gIFxyXG4gICAgICBjb25zdCBlbGVtZW50ID0gZXZ0LnRhcmdldC5jbG9zZXN0KCcuZWxlbWVudHNfX2VsZW1lbnQnKVxyXG4gICAgXHJcbiAgICAgIGNvbnN0IHJlcXVlc3QgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuICAgIFxyXG4gICAgICByZXF1ZXN0Lm9wZW4oXCJERUxFVEVcIiwgICdodHRwOi8vMTI3LjAuMC4xOjMwMDIvY2FyZHMvJyArIGVsZW1lbnQuX2lkLCB0cnVlKTtcclxuICAgIFxyXG4gICAgICByZXF1ZXN0Lm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZihyZXF1ZXN0LnJlYWR5U3RhdGUgPT09IFhNTEh0dHBSZXF1ZXN0LkRPTkUpIHtcclxuICAgICAgICAgIGVsZW1lbnQucmVtb3ZlKCk7ICAgICAgICBcclxuICAgICAgICB9O1xyXG4gICAgICB9O1xyXG4gICAgXHJcbiAgICAgIHJlcXVlc3Quc2VuZChudWxsKTtcclxuICAgIFxyXG4gICAgfVxyXG4gIFxyXG4gICAgZ2V0Q2FyZCgpIHtcclxuICAgICAgXHJcbiAgICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xyXG4gIFxyXG4gICAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIFxyXG4gICAgICB0aGlzLl9lbGVtZW50LmlkID0gdGhpcy5faWQ7XHJcbiAgICBcclxuICAgICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudHNfX25hbWUnKS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XHJcbiAgICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRzX19pbWFnZScpLnNyYyAgICAgICAgPSB0aGlzLl9saW5rO1xyXG4gICAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50c19faW1hZ2UnKS5hbHQgICAgICAgID0gdGhpcy5fbmFtZTtcclxuICAgICBcclxuICAgICAgcmV0dXJuIHRoaXMuX2VsZW1lbnQ7XHJcbiAgICBcclxuICAgIH1cclxuICBcclxuICB9IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XHJcbiAgICAgICAgdGhpcy5faXRlbXMgPSBpdGVtcztcclxuICAgICAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgICAgIHRoaXMuX2NhcmRFbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlckFsbCgpIHtcclxuICAgICAgICB0aGlzLl9pdGVtcy5mb3JFYWNoKGVsZW1lbnQgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl9yZW5kZXJlcihlbGVtZW50KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBhZGRJdGVtKGNhcmQpIHtcclxuICAgICAgICB0aGlzLl9jYXJkRWxlbWVudHMuYXBwZW5kKGNhcmQpO1xyXG4gICAgfVxyXG59IiwiZXhwb3J0IGNvbnN0IGlucHV0RGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudHlwZV9uZXctaXRlbSAucG9wdXBfX2lucHV0X3R5cGVfbGluZS1vbmUnKTtcclxuZXhwb3J0IGNvbnN0IGlucHV0TGluayAgICAgICAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudHlwZV9uZXctaXRlbSAucG9wdXBfX2lucHV0X3R5cGVfbGluZS10d28nKTtcclxuZXhwb3J0IGNvbnN0IGNhcmRFbGVtZW50cyAgICAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudHMnKTtcclxuXHJcbmV4cG9ydCBjb25zdCBpbnB1dE5hbWUgICAgICAgID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnR5cGVfcHJvZmlsZSAucG9wdXBfX2lucHV0X3R5cGVfbGluZS1vbmUnKTtcclxuZXhwb3J0IGNvbnN0IGlucHV0T2NjdXBhdGlvbiAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudHlwZV9wcm9maWxlIC5wb3B1cF9faW5wdXRfdHlwZV9saW5lLXR3bycpO1xyXG5cclxuZXhwb3J0IGNvbnN0IGVkaXRCdXR0b24gID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2VkaXRCdXR0b24nKTtcclxuZXhwb3J0IGNvbnN0IGFkZEJ1dHRvbiAgID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2FkZEJ1dHRvbicpO1xyXG5cclxuZXhwb3J0IGNvbnN0IHZhbGlkYXRpbmdQYXJhbWV0cmVzID0ge1xyXG4gIGZvcm1TZWxlY3RvcjogICAgICAgICAnLnBvcHVwX19jb250YWluZXInLFxyXG4gIGlucHV0U2VsZWN0b3I6ICAgICAgICAnLnBvcHVwX19pbnB1dCcsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6ICcucG9wdXBfX3NhdmVCdXR0b24nLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6ICAncG9wdXBfX3NhdmVCdXR0b25fZXJyb3InLFxyXG4gIGlucHV0RXJyb3JDbGFzczogICAgICAncG9wdXBfX2lucHV0X3N0eWxlLWVycm9yJyxcclxuICBlcnJvckNsYXNzOiAgICAgICAgICAgJ3BvcHVwX19pbnB1dC1lcnJvcl9wbGFjZV9saW5lJ1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGluaXRVc2VyRGF0YSA9IHtcclxuICBuYW1lOiAgICAgICAn0JbQsNC6LdCY0LIg0JrRg9GB0YLQvicsXHJcbiAgb2NjdXBhdGlvbjogJ9CY0YHRgdC70LXQtNC+0LLQsNGC0LXQu9GMINC+0LrQtdCw0L3QsCdcclxufTsiLCJpbXBvcnQgQ2FyZCBmcm9tICcuL0NhcmQuanMnO1xyXG5pbXBvcnQgU2VjdGlvbiBmcm9tICcuL1NlY3Rpb24uanMnO1xyXG5pbXBvcnQge2ltYWdlUG9wdXB9IGZyb20gJy4uL3BhZ2VzL2luZGV4LmpzJztcclxuaW1wb3J0IHtpbnB1dERlc2NyaXB0aW9uLCBpbnB1dExpbmssIGNhcmRFbGVtZW50c30gZnJvbSAnLi4vdXRpbHMvdmFyaWFibGVzLmpzJztcclxuXHJcbmxldCBDYXJkc1NlY3Rpb24gPSB1bmRlZmluZWQ7IFxyXG5cclxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gcmVmcmVzaENhcmRzKCkge1xyXG5cclxuICB3aGlsZShjYXJkRWxlbWVudHMuZmlyc3RDaGlsZCkge1xyXG4gICAgY2FyZEVsZW1lbnRzLnJlbW92ZUNoaWxkKGNhcmRFbGVtZW50cy5maXJzdENoaWxkKTtcclxuICB9O1xyXG5cclxuICBjb25zdCByZXF1ZXN0ID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcblxyXG4gIHJlcXVlc3Qub3BlbignR0VUJywgJ2h0dHA6Ly8xMjcuMC4wLjE6MzAwMi9jYXJkcycsIHRydWUpO1xyXG5cclxuICByZXF1ZXN0Lm9ubG9hZCA9IGZ1bmN0aW9uICgpIHsgICAgXHJcbiAgICBcclxuICAgIGNvbnN0IGRhdGEgPSB7aXRlbXM6IEpTT04ucGFyc2UodGhpcy5yZXNwb25zZSksXHJcbiAgICAgICAgICAgICAgICAgIHJlbmRlcmVyOiByZWNvcmQgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld0NhcmQgPSBuZXcgQ2FyZChyZWNvcmQsICcjY2FyZC10ZW1wbGF0ZScsIGV2dCA9PiBpbWFnZVBvcHVwLm9wZW4oZXZ0LnRhcmdldC5zcmMsIGV2dC50YXJnZXQuYWx0KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBuZXdDYXJkLmdldENhcmQoKTtcclxuICAgICAgICAgICAgICAgICAgICBDYXJkc1NlY3Rpb24uYWRkSXRlbShjYXJkRWxlbWVudCk7ICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgIH19O1xyXG5cclxuICAgIENhcmRzU2VjdGlvbiA9IG5ldyBTZWN0aW9uKGRhdGEsICcuZWxlbWVudHMnKTtcclxuICAgIENhcmRzU2VjdGlvbi5yZW5kZXJBbGwoKTtcclxuICAgIFxyXG4gIH1cclxuXHJcbiAgcmVxdWVzdC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpIHtcclxuXHJcbiAgICBpZiAocmVxdWVzdC5yZWFkeVN0YXRlICE9IDQpIHJldHVybjtcclxuXHJcbiAgICBpZiAocmVxdWVzdC5zdGF0dXMgIT0gMjAwKSB7XHJcbiAgICAgIGJpZ0NhcmRJbWFnZS5zcmMgPSBcIi4vaW1hZ2VzL2Vycm9yLmpwZ1wiO1xyXG4gICAgICBjaGFuZ2VGb3JtVmlzaWJpbGl0eShmb3JtQmlnQ2FyZCk7XHJcbiAgICB9XHJcblxyXG4gIH1cclxuXHJcbiAgcmVxdWVzdC5zZW5kKCk7XHJcblxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgYWRkQ2FyZFRvREIgPSAoKSA9PiB7XHJcblxyXG4gIGNvbnN0IHJlcXVlc3QgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuXHJcbiAgY29uc3QgbmFtZSA9IGlucHV0RGVzY3JpcHRpb24udmFsdWU7XHJcbiAgY29uc3QgbGluayA9IGlucHV0TGluay52YWx1ZTtcclxuXHJcbiAgcmVxdWVzdC5vcGVuKFwiUE9TVFwiLCAnaHR0cDovLzEyNy4wLjAuMTozMDAyL2NhcmRzJywgdHJ1ZSk7XHJcbiAgcmVxdWVzdC5zZXRSZXF1ZXN0SGVhZGVyKCdDb250ZW50LVR5cGUnLCAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJyk7XHJcblxyXG4gIHJlcXVlc3Qub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgaWYocmVxdWVzdC5yZWFkeVN0YXRlID09PSBYTUxIdHRwUmVxdWVzdC5ET05FICYmIHJlcXVlc3Quc3RhdHVzID09PSAyMDEpIHtcclxuXHJcbiAgICAgIGNvbnN0IHJlY29yZCA9IHtpZDogTnVtYmVyKHJlcXVlc3QucmVzcG9uc2UpLCBcclxuICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IG5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICBsaW5rOiBsaW5rfTtcclxuXHJcbiAgICAgIGNvbnN0IG5ld0NhcmQgPSBuZXcgQ2FyZChyZWNvcmQsICcjY2FyZC10ZW1wbGF0ZScsIGV2dCA9PiBpbWFnZVBvcHVwLm9wZW4oZXZ0LnRhcmdldC5zcmMsIGV2dC50YXJnZXQuYWx0KSk7XHJcbiAgICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gbmV3Q2FyZC5nZXRDYXJkKCk7XHJcbiAgICAgIENhcmRzU2VjdGlvbi5hZGRJdGVtKGNhcmRFbGVtZW50KTtcclxuXHJcbiAgICB9O1xyXG4gIH07XHJcblxyXG4gIHJlcXVlc3Quc2VuZCgnbmFtZT0nICsgZW5jb2RlVVJJQ29tcG9uZW50KG5hbWUpICsgJyZsaW5rPScgKyBlbmNvZGVVUklDb21wb25lbnQobGluaykpO1xyXG5cclxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcclxuICAgIGNvbnN0cnVjdG9yKGZvcm1TZWxlY3Rvcikge1xyXG4gICAgICAgIHRoaXMuX3BvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwJyk7XHJcbiAgICAgICAgdGhpcy5fZm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZm9ybVNlbGVjdG9yKTtcclxuICAgICAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSA9IGV2dCA9PiB7XHJcbiAgICAgICAgICAgIGlmIChldnQua2V5PT09XCJFc2NhcGVcIikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG9wZW4oKSB7XHJcbiAgICAgICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XHJcbiAgICAgICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LmFkZCgndmlzaWJsZScpO1xyXG4gICAgICAgIHRoaXMuX2Zvcm0uY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XHJcbiAgICAgICAgdGhpcy5fZm9ybS5jbGFzc0xpc3QuYWRkKCd2aXNpYmxlJyk7XHJcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICAgIH1cclxuXHJcbiAgICBjbG9zZSgpIHtcclxuICAgICAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcclxuICAgICAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QucmVtb3ZlKCd2aXNpYmxlJyk7XHJcbiAgICAgICAgdGhpcy5fZm9ybS5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcclxuICAgICAgICB0aGlzLl9mb3JtLmNsYXNzTGlzdC5yZW1vdmUoJ3Zpc2libGUnKTtcclxuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gICAgfSAgICBcclxuXHJcbiAgICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGV2dCA9PiB7XHJcbiAgICAgICAgICAgIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcInBvcHVwXCIpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgICAgICAgIH0gXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGV2dCA9PiB7XHJcbiAgICAgICAgICAgIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcImV4aXRCdXR0b25cIikpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICAgICAgfSBcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufSIsImltcG9ydCBQb3B1cCBmcm9tICcuL1BvcHVwLmpzJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gICAgY29uc3RydWN0b3IoZm9ybVNlbGVjdG9yKSB7XHJcbiAgICAgICAgc3VwZXIoZm9ybVNlbGVjdG9yKTtcclxuICAgICAgICB0aGlzLl9iaWdDYXJkSW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2ltYWdlJyk7XHJcbiAgICAgICAgdGhpcy5fYmlnQ2FyZENhcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2NhcHRpb24nKTtcclxuICAgIH1cclxuXHJcbiAgICBvcGVuKHNyYywgYWx0KSB7XHJcbiAgICAgICAgdGhpcy5fYmlnQ2FyZEltYWdlLnNyYyAgICAgICAgICAgPSBzcmM7XHJcbiAgICAgICAgdGhpcy5fYmlnQ2FyZENhcHRpb24udGV4dENvbnRlbnQgPSBhbHQ7XHJcbiAgICAgICAgc3VwZXIub3BlbigpOyAgICAgICAgXHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgUG9wdXAgZnJvbSAnLi9Qb3B1cC5qcyc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gICAgY29uc3RydWN0b3IoZm9ybVNlbGVjdG9yLCBzdWJtaXRIYW5kbGVyKSB7XHJcbiAgICAgICAgc3VwZXIoZm9ybVNlbGVjdG9yKTtcclxuICAgICAgICB0aGlzLl9zdWJtaXRIYW5kbGVyID0gc3VibWl0SGFuZGxlcjtcclxuICAgIH1cclxuXHJcbiAgICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcblxyXG4gICAgICAgIGNvbnN0IGlucHV0TGlzdCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbCgnLnBvcHVwX19pbnB1dCcpO1xyXG5cclxuICAgICAgICB0aGlzLl9mb3JtVmFsdWVzID0ge307XHJcbiAgICAgIFxyXG4gICAgICAgIGlucHV0TGlzdC5mb3JFYWNoKGlucHV0ID0+IHtcclxuICAgICAgICAgIHRoaXMuX2Zvcm1WYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgICAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgdGhpcy5fc3VibWl0SGFuZGxlcik7XHJcbiAgICB9XHJcblxyXG4gICAgY2xvc2UoKSB7XHJcbiAgICAgICAgc3VwZXIuY2xvc2UoKTtcclxuICAgICAgICB0aGlzLl9mb3JtLnJlc2V0KCk7XHJcbiAgICB9XHJcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgICBjb25zdHJ1Y3Rvcih7IHVzZXJOYW1lU2VsZWN0b3Isb2NjdXBhdGlvblNlbGVjdG9yfSkge1xyXG5cclxuICAgICAgICB0aGlzLl9wcm9maWxlTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodXNlck5hbWVTZWxlY3Rvcik7XHJcbiAgICAgICAgdGhpcy5fcHJvZmlsZU9jY3VwYXRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG9jY3VwYXRpb25TZWxlY3Rvcik7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIGdldFVzZXJJbmZvKCkge1xyXG4gICAgICAgIHJldHVybiB7bmFtZTogdGhpcy5fcHJvZmlsZU5hbWUudGV4dENvbnRlbnQsXHJcbiAgICAgICAgICAgICAgICBvY2N1cGF0aW9uOiB0aGlzLl9wcm9maWxlT2NjdXBhdGlvbi50ZXh0Q29udGVudH1cclxuICAgIH1cclxuXHJcbiAgICBzZXRVc2VySW5mbyh7IG5hbWUsb2NjdXBhdGlvbiB9KSB7XHJcbiAgICAgICAgdGhpcy5fcHJvZmlsZU5hbWUudGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgICAgIHRoaXMuX3Byb2ZpbGVPY2N1cGF0aW9uLnRleHRDb250ZW50ID0gb2NjdXBhdGlvbjtcclxuICAgIH1cclxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuXG4gIGNvbnN0cnVjdG9yKHBhcmFtZXRyZXMsIGZvcm1FbGVtZW50KSB7XG5cbiAgICB0aGlzLl9pbnB1dExpc3QgICAgICAgICAgICA9IEFycmF5LmZyb20oZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChwYXJhbWV0cmVzLmlucHV0U2VsZWN0b3IpKTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IHBhcmFtZXRyZXMuc3VibWl0QnV0dG9uU2VsZWN0b3I7XG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyAgPSBwYXJhbWV0cmVzLmluYWN0aXZlQnV0dG9uQ2xhc3M7XG4gICAgdGhpcy5faW5wdXRFcnJvckNsYXNzICAgICAgPSBwYXJhbWV0cmVzLmlucHV0RXJyb3JDbGFzcztcbiAgICB0aGlzLl9lcnJvckNsYXNzICAgICAgICAgICA9IHBhcmFtZXRyZXMuZXJyb3JDbGFzczsgICAgICAgXG5cbiAgfVxuXG5cbiAgZW5hYmxlVmFsaWRhdGlvbiAoKSB7XG5cbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaChpbnB1dCA9PiB7XG4gIFxuICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoZXZ0KSA9PiB7XG4gICAgICAgIHRoaXMuX2hhbmRsZVZhbGlkaXR5KGV2dCk7XG4gICAgICB9KTtcbiAgXG4gICAgfSk7ICBcblxuICB9XG5cbiAgX2hhbmRsZVZhbGlkaXR5KGV2dCkge1xuXG4gICAgY29uc3QgaW5wdXQgPSBldnQudGFyZ2V0O1xuXG4gICAgaWYgKCFpbnB1dC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgdGhpcy5fc2hvd0Vycm9yKGlucHV0KTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICB0aGlzLl9oaWRlRXJyb3IoaW5wdXQpO1xuICAgIH1cblxuICAgIHRoaXMuX2NoZWNrU3VibWl0dGVyQXZhaWxhYmlsaXR5KCk7ICAgIFxuXG4gIH1cblxuICBfY2hlY2tTdWJtaXR0ZXJBdmFpbGFiaWxpdHkoKSB7XG5cbiAgICBjb25zdCBzdWJtaXRCdXR0b24gPSB0aGlzLl9pbnB1dExpc3RbMF0uZm9ybS5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcbiAgXG4gICAgaWYgKHRoaXMuX2lucHV0TGlzdC5ldmVyeShpbnB1dCA9PiBpbnB1dC52YWxpZGl0eS52YWxpZCkpIHtcbiAgICAgIHN1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgICAgc3VibWl0QnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgICBzdWJtaXRCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuICAgIH1cbiAgXG4gIH1cbiAgXG4gIF9zaG93RXJyb3IoaW5wdXQpIHtcbiAgXG4gICAgaW5wdXQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICBcbiAgICBjb25zdCBzcGFuRXJyb3IgPSBpbnB1dC5mb3JtLnF1ZXJ5U2VsZWN0b3IoJy4nICsgdGhpcy5fZXJyb3JDbGFzcyArIGlucHV0LmlkKTtcbiAgXG4gICAgc3BhbkVycm9yLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xuICAgIHNwYW5FcnJvci50ZXh0Q29udGVudCA9IGlucHV0LnZhbGlkYXRpb25NZXNzYWdlO1xuICBcbiAgfVxuICBcbiAgX2hpZGVFcnJvcihpbnB1dCkge1xuICBcbiAgICBpbnB1dC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG4gIFxuICAgIGNvbnN0IHNwYW5FcnJvciA9IGlucHV0LmZvcm0ucXVlcnlTZWxlY3RvcignLicgKyB0aGlzLl9lcnJvckNsYXNzICsgaW5wdXQuaWQpO1xuICBcbiAgICBzcGFuRXJyb3IuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gIFxuICB9XG5cbn0iLCJpbXBvcnQgJy4vaW5kZXguY3NzJztcblxuaW1wb3J0IHJlZnJlc2hDYXJkcyBmcm9tICcuLi9jb21wb25lbnRzL2RhdGEuanMnO1xuXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyc7XG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMnO1xuXG5pbXBvcnQgVXNlckluZm8gZnJvbSAnLi4vY29tcG9uZW50cy9Vc2VySW5mby5qcyc7XG5cbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gJy4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyc7XG5cbmltcG9ydCB7aW5wdXROYW1lLCBpbnB1dE9jY3VwYXRpb24sIGVkaXRCdXR0b24sIGFkZEJ1dHRvbiwgdmFsaWRhdGluZ1BhcmFtZXRyZXMsIGluaXRVc2VyRGF0YX0gZnJvbSAnLi4vdXRpbHMvdmFyaWFibGVzLmpzJztcblxuaW1wb3J0IHthZGRDYXJkVG9EQiBhcyBhZGRDYXJkVG9EQn0gZnJvbSAnLi4vY29tcG9uZW50cy9kYXRhLmpzJztcblxuLy9wb3B1cCDRgSDQsdC+0LvRjNGI0L7QuSDQutCw0YDRgtC40L3QutC+0LlcbmV4cG9ydCBjb25zdCBpbWFnZVBvcHVwID0gbmV3IFBvcHVwV2l0aEltYWdlKCcucG9wdXBfX2JpZy1jYXJkJyk7XG5pbWFnZVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbi8vcG9wdXAg0YDQtdC00LDQutGC0LjRgNC+0LLQsNC90LjRjyDQv9GA0L7RhNCw0LnQu9CwXG5leHBvcnQgY29uc3QgcHJvZmlsZVBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oJy50eXBlX3Byb2ZpbGUnLCBldnQgPT4ge1xuICAgIFxuICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICBcbiAgICBwcm9maWxlUG9wdXAuX2dldElucHV0VmFsdWVzKCk7XG5cbiAgICBjdXJyZW50VXNlckluZm8uc2V0VXNlckluZm8ocHJvZmlsZVBvcHVwLl9mb3JtVmFsdWVzKTtcblxuICAgIHByb2ZpbGVQb3B1cC5jbG9zZSgpO1xufSk7XG5cbnByb2ZpbGVQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuXG5lZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgIGNvbnN0IHVzZXJEYXRhID0gY3VycmVudFVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XG4gICAgaW5wdXROYW1lLnZhbHVlICAgICAgID0gdXNlckRhdGEubmFtZTtcbiAgICBpbnB1dE9jY3VwYXRpb24udmFsdWUgPSB1c2VyRGF0YS5vY2N1cGF0aW9uO1xuICAgIHByb2ZpbGVQb3B1cC5vcGVuKCk7XG59KTtcblxuLy9wb3B1cCDRgNC10LTQsNC60YLQuNGA0L7QstCw0L3QuNGPINC90L7QstC+0Lkg0LrQsNGA0YLQvtGH0LrQuFxuZXhwb3J0IGNvbnN0IG5ld0l0ZW1Qb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKCcudHlwZV9uZXctaXRlbScsIGV2dCA9PiB7XG4gICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gIFxuICAgIGFkZENhcmRUb0RCKCk7XG4gIFxuICAgIG5ld0l0ZW1Qb3B1cC5jbG9zZSgpO1xufSk7XG5cbm5ld0l0ZW1Qb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuXG5hZGRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgbmV3SXRlbVBvcHVwLm9wZW4oKTtcbn0pO1xuXG4vL9C40L3QuNGG0LjQsNC70LjQt9Cw0YbQuNGPINC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRj1xuZXhwb3J0IGNvbnN0IGN1cnJlbnRVc2VySW5mbyA9IG5ldyBVc2VySW5mbyh7dXNlck5hbWVTZWxlY3RvcjogJy5wcm9maWxlX19uYW1lJywgb2NjdXBhdGlvblNlbGVjdG9yOicucHJvZmlsZV9fb2NjdXBhdGlvbid9KTtcbmN1cnJlbnRVc2VySW5mby5zZXRVc2VySW5mbyhpbml0VXNlckRhdGEpO1xuXG4vL9C/0L7QtNC60LvRjtGH0LXQvdC40LUg0LLQsNC70LjQtNCw0YbQuNC4INGE0L7RgNC80YtcbmNvbnN0IHtmb3JtU2VsZWN0b3IsLi4ucGFyYW1ldHJlc30gPSB2YWxpZGF0aW5nUGFyYW1ldHJlcztcbmNvbnN0IGZvcm1MaXN0ID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGZvcm1TZWxlY3RvcikpO1xuXG5mb3JtTGlzdC5mb3JFYWNoKGZvcm1FbGVtZW50ID0+IHtcbiAgICBjb25zdCB2YWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihwYXJhbWV0cmVzLCBmb3JtRWxlbWVudCk7XG4gICAgdmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTsgICAgXG59KTsgIFxuXG4vL9GA0LXQvdC00LXRgNC40L3QsyDQutCw0YDRgtC+0YfQtdC6XG5yZWZyZXNoQ2FyZHMoKTsiXSwibmFtZXMiOlsiX193ZWJwYWNrX3JlcXVpcmVfXyIsImV4cG9ydHMiLCJkZWZpbml0aW9uIiwia2V5IiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsIm9iaiIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJDYXJkIiwiZGJSZWNvcmQiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVDYXJkQ2xpY2siLCJ0aGlzIiwiX2lkIiwiaWQiLCJfbGluayIsImxpbmsiLCJfbmFtZSIsIm5hbWUiLCJfY2FyZFNlbGVjdG9yIiwiX2hhbmRsZUNhcmRDbGljayIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfZWxlbWVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJfdG9nZ2xlTGlrZSIsIl9yZW1vdmVDYXJkIiwiZXZ0IiwidGFyZ2V0IiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwiZWxlbWVudCIsImNsb3Nlc3QiLCJyZXF1ZXN0IiwiWE1MSHR0cFJlcXVlc3QiLCJvcGVuIiwib25sb2FkIiwicmVhZHlTdGF0ZSIsIkRPTkUiLCJyZW1vdmUiLCJzZW5kIiwiX2dldFRlbXBsYXRlIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwidGV4dENvbnRlbnQiLCJzcmMiLCJhbHQiLCJTZWN0aW9uIiwiY29udGFpbmVyU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX2l0ZW1zIiwiX3JlbmRlcmVyIiwiX2NhcmRFbGVtZW50cyIsImZvckVhY2giLCJjYXJkIiwiYXBwZW5kIiwiaW5wdXREZXNjcmlwdGlvbiIsImlucHV0TGluayIsImNhcmRFbGVtZW50cyIsImlucHV0TmFtZSIsImlucHV0T2NjdXBhdGlvbiIsImVkaXRCdXR0b24iLCJhZGRCdXR0b24iLCJ2YWxpZGF0aW5nUGFyYW1ldHJlcyIsImZvcm1TZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiQ2FyZHNTZWN0aW9uIiwidW5kZWZpbmVkIiwiUG9wdXAiLCJfcG9wdXAiLCJfZm9ybSIsIl9oYW5kbGVFc2NDbG9zZSIsImNsb3NlIiwiYWRkIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImNvbnRhaW5zIiwiUG9wdXBXaXRoSW1hZ2UiLCJfYmlnQ2FyZEltYWdlIiwiX2JpZ0NhcmRDYXB0aW9uIiwiUG9wdXBXaXRoRm9ybSIsInN1Ym1pdEhhbmRsZXIiLCJfc3VibWl0SGFuZGxlciIsImlucHV0TGlzdCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfZm9ybVZhbHVlcyIsImlucHV0IiwidmFsdWUiLCJyZXNldCIsIlVzZXJJbmZvIiwidXNlck5hbWVTZWxlY3RvciIsIm9jY3VwYXRpb25TZWxlY3RvciIsIl9wcm9maWxlTmFtZSIsIl9wcm9maWxlT2NjdXBhdGlvbiIsIm9jY3VwYXRpb24iLCJGb3JtVmFsaWRhdG9yIiwicGFyYW1ldHJlcyIsImZvcm1FbGVtZW50IiwiX2lucHV0TGlzdCIsIkFycmF5IiwiZnJvbSIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiX2hhbmRsZVZhbGlkaXR5IiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oaWRlRXJyb3IiLCJfc2hvd0Vycm9yIiwiX2NoZWNrU3VibWl0dGVyQXZhaWxhYmlsaXR5Iiwic3VibWl0QnV0dG9uIiwiZm9ybSIsImV2ZXJ5IiwiZGlzYWJsZWQiLCJzcGFuRXJyb3IiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsImltYWdlUG9wdXAiLCJzZXRFdmVudExpc3RlbmVycyIsInByb2ZpbGVQb3B1cCIsInByZXZlbnREZWZhdWx0IiwiX2dldElucHV0VmFsdWVzIiwiY3VycmVudFVzZXJJbmZvIiwic2V0VXNlckluZm8iLCJ1c2VyRGF0YSIsImdldFVzZXJJbmZvIiwibmV3SXRlbVBvcHVwIiwic2V0UmVxdWVzdEhlYWRlciIsIm9ucmVhZHlzdGF0ZWNoYW5nZSIsInN0YXR1cyIsInJlY29yZCIsIk51bWJlciIsInJlc3BvbnNlIiwiY2FyZEVsZW1lbnQiLCJnZXRDYXJkIiwiYWRkSXRlbSIsImVuY29kZVVSSUNvbXBvbmVudCIsImVuYWJsZVZhbGlkYXRpb24iLCJmaXJzdENoaWxkIiwicmVtb3ZlQ2hpbGQiLCJkYXRhIiwiSlNPTiIsInBhcnNlIiwicmVuZGVyQWxsIiwiYmlnQ2FyZEltYWdlIiwiY2hhbmdlRm9ybVZpc2liaWxpdHkiLCJmb3JtQmlnQ2FyZCIsInJlZnJlc2hDYXJkcyJdLCJzb3VyY2VSb290IjoiIn0=